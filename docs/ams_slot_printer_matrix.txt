  ┌─────────────────┬─────────────────┬────────────────┬────────────────────────────────────┬─────────────────────┐
  │      Model      │ _is_dual_nozzle │ ams_exist_bits │             Branch hit             │      Behavior       │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ X1C/X1E (1 AMS) │ False           │ "1"            │ New elif → num_ams=1 → passthrough │ Unchanged           │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ X1C (2 AMS)     │ False           │ "3"            │ New elif → disambiguation          │ Fixed (same as P2S) │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ P1S/P1P (1 AMS) │ False           │ "1"            │ New elif → num_ams=1 → passthrough │ Unchanged           │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ A1/A1 Mini      │ False           │ "1" or missing │ New elif → num_ams≤1 → passthrough │ Unchanged           │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ P2S (1 AMS)     │ False           │ "1"            │ New elif → num_ams=1 → passthrough │ Unchanged           │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ P2S (2 AMS)     │ False           │ "3"            │ New elif → disambiguation          │ Fixed               │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ H2D/H2D Pro     │ True            │ any            │ Branch 1 (H2D logic)               │ Unchanged           │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ H2C             │ True            │ any            │ Branch 1 (H2D logic)               │ Unchanged           │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ tray_now=255    │ any             │ any            │ Branch 3 (passthrough)             │ Unchanged           │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ tray_now=254    │ any             │ any            │ Branch 3 (passthrough)             │ Unchanged           │
  ├─────────────────┼─────────────────┼────────────────┼────────────────────────────────────┼─────────────────────┤
  │ tray_now 4-15   │ any (False)     │ any            │ Branch 3 (passthrough)             │ Unchanged           │
  └─────────────────┴─────────────────┴────────────────┴────────────────────────────────────┴─────────────────────┘
